# Order Extraction JSON Schema
# MCP Validated: 2026-01-25
# Use this schema in LLM system prompts to guide extraction output format

$schema: "https://json-schema.org/draft/2020-12/schema"
title: OrderExtraction
description: Schema for LLM order extraction output from structured documents
type: object

required:
  - order_id
  - supplier_name
  - order_date
  - subtotal
  - total_amount

properties:
  order_id:
    type: string
    description: Unique order identifier (e.g., ORD-2026-001)
    minLength: 1
    examples:
      - "ORD-2026-001"
      - "DOC-12345"

  supplier_name:
    type: string
    description: Supplier or organization name
    minLength: 1
    examples:
      - "Example Vendor"
      - "Sample Supplier"

  supplier_type:
    type: string
    description: Category type
    enum:
      - category_a
      - category_b
      - category_c
      - other
    default: other

  order_date:
    type: string
    format: date
    description: Order issue date (YYYY-MM-DD format)
    examples:
      - "2026-01-15"

  due_date:
    type: string
    format: date
    description: Payment due date (YYYY-MM-DD format)
    nullable: true
    examples:
      - "2026-02-15"

  subtotal:
    type: number
    description: Subtotal before tax and fees
    minimum: 0
    examples:
      - 100.00

  tax_amount:
    type: number
    description: Tax amount
    minimum: 0
    default: 0
    examples:
      - 8.00

  commission_rate:
    type: number
    description: Platform commission rate (0.0 to 1.0)
    minimum: 0
    maximum: 1
    nullable: true
    examples:
      - 0.15
      - 0.30

  commission_amount:
    type: number
    description: Platform commission amount in currency
    minimum: 0
    nullable: true
    examples:
      - 15.00

  total_amount:
    type: number
    description: Total order amount
    minimum: 0
    examples:
      - 108.00

  currency:
    type: string
    description: ISO 4217 currency code
    enum:
      - USD
      - EUR
      - GBP
      - CAD
    default: USD
    maxLength: 3

  line_items:
    type: array
    description: Individual line items on the order
    default: []
    items:
      type: object
      required:
        - description
        - unit_price
        - amount
      properties:
        description:
          type: string
          description: Item or service description
          minLength: 1
          maxLength: 500
        quantity:
          type: integer
          description: Quantity of items
          minimum: 1
          default: 1
        unit_price:
          type: number
          description: Price per unit
          minimum: 0
        amount:
          type: number
          description: Total amount (quantity * unit_price)
          minimum: 0

examples:
  - order_id: "ORD-2026-001"
    supplier_name: "Example Vendor"
    supplier_type: "category_a"
    order_date: "2026-01-15"
    due_date: "2026-02-15"
    subtotal: 100.00
    tax_amount: 8.00
    commission_rate: 0.15
    commission_amount: 15.00
    total_amount: 123.00
    currency: "USD"
    line_items:
      - description: "Premium Widget"
        quantity: 2
        unit_price: 25.00
        amount: 50.00
      - description: "Service Fee"
        quantity: 1
        unit_price: 5.00
        amount: 5.00
