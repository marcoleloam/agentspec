# AgentSpec - Contratos de Workflow
# Workflow de Desenvolvimento em 5 Fases com Matching e Delegação de Agentes
# Versão: 2.0.0
# Data: 2026-02-27

version: "2.0.0"
name: "AgentSpec"
description: "Workflow de desenvolvimento de software em 5 fases com orquestração de agentes"

# =============================================================================
# IDIOMA
# =============================================================================

language:
  output: "pt-BR"
  rule: "Todos os documentos gerados e interações com o usuário DEVEM ser em Português-BR"
  exceptions:
    - "Prefixos de arquivo: BRAINSTORM_, DEFINE_, DESIGN_, BUILD_REPORT_, SHIPPED_"
    - "Termos técnicos: MoSCoW, YAGNI, MVP, ADR, API, KB, ASCII"
    - "Nomes de ferramentas: Read, Write, Edit, Grep, Glob, Bash, TodoWrite, Task"

# =============================================================================
# VISÃO GERAL DO WORKFLOW
# =============================================================================

workflow:
  phases:
    - name: "Explorar"
      number: 0
      command: "/explorar"
      agent: "brainstorm-agent"
      purpose: "Exploração colaborativa para clarificar intenção e abordagem"
      input: "Ideia, solicitação ou declaração de problema"
      output: "00_BRAINSTORM_{FEATURE}.md"
      model: "opus"
      optional: true

    - name: "Definir"
      number: 1
      command: "/definir"
      agent: "define-agent"
      purpose: "Capturar e validar requisitos"
      input: "Notas, emails, conversas, documento BRAINSTORM, ou requisitos diretos"
      output: "01_DEFINE_{FEATURE}.md"
      model: "opus"

    - name: "Projetar"
      number: 2
      command: "/projetar"
      agent: "design-agent"
      purpose: "Criar arquitetura e especificação técnica"
      input: "01_DEFINE_{FEATURE}.md"
      output: "02_DESIGN_{FEATURE}.md"
      model: "opus"

    - name: "Construir"
      number: 3
      command: "/construir"
      agent: "build-agent"
      purpose: "Executar implementação com verificação"
      input: "02_DESIGN_{FEATURE}.md"
      output: "Arquivos de código + BUILD_REPORT_{FEATURE}.md"
      model: "sonnet"

    - name: "Entregar"
      number: 4
      command: "/entregar"
      agent: "ship-agent"
      purpose: "Arquivar feature com lições aprendidas"
      input: "Todos os artefatos da feature"
      output: "archive/{FEATURE}/SHIPPED_{DATE}.md"
      model: "haiku"

  cross_phase:
    - name: "Iterar"
      command: "/iterar"
      agent: "iterate-agent"
      purpose: "Atualizar qualquer documento de fase quando mudanças necessárias"
      works_with: ["Explorar", "Definir", "Projetar"]
      phase_3_note: "Para alterar código durante Construir, atualize DESIGN depois execute /construir"
      model: "sonnet"

# =============================================================================
# FASE 0: EXPLORAR (Opcional)
# =============================================================================

brainstorm:
  command:
    name: "/explorar"
    file: ".claude/skills/workflow/explorar.md"
    args: "<ideia-ou-solicitação>"
    examples:
      - '/explorar "Construir um sistema de notificações em tempo real"'
      - '/explorar notas/ideia-inicial.txt'
      - '/explorar "Quero adicionar funcionalidade de exportação de dados"'

  agent:
    name: "brainstorm-agent"
    file: ".claude/agents/workflow/brainstorm-agent.md"
    model: "opus"
    tools:
      - Read
      - Write
      - AskUserQuestion
      - Glob
      - Grep
      - TodoWrite

  input:
    types:
      - ideia_bruta
      - declaracao_problema
      - solicitacao_feature
      - notas_rascunho
      - solicitacao_comparacao

  output:
    file: ".claude/sdd/features/00_BRAINSTORM_{FEATURE}.md"
    template: ".claude/sdd/templates/BRAINSTORM_TEMPLATE.md"
    status_values:
      - "Explorando"
      - "Abordagens Identificadas"
      - "Pronto para Definir"

  process:
    steps:
      - name: "Coletar Contexto"
        description: "Ler arquivos do projeto, commits recentes, padrões existentes"
      - name: "Perguntas de Descoberta"
        description: "Fazer uma pergunta por vez, mínimo 3 perguntas"
      - name: "Coletar Exemplos"
        description: "Perguntar sobre exemplos de entrada, saída, dados de referência para grounding do LLM"
      - name: "Explorar Abordagens"
        description: "Apresentar 2-3 abordagens com trade-offs e recomendação"
      - name: "Aplicar YAGNI"
        description: "Remover funcionalidades desnecessárias, documentar o que foi removido"
      - name: "Validar Incrementalmente"
        description: "Apresentar design em seções, verificar após cada (mín 2)"
      - name: "Gerar Documento"
        description: "Escrever arquivo BRAINSTORM com rascunho de requisitos e inventário de exemplos"

  questioning:
    principles:
      - uma_pergunta_por_vez: "Nunca fazer múltiplas perguntas em uma mensagem"
      - multipla_escolha_preferida: "Mais fácil de responder que perguntas abertas"
      - minimo_perguntas: 3
      - aberta_ok: "Quando explorando território desconhecido"

  approaches:
    minimum: 2
    maximum: 3
    format:
      - name: "Nome descritivo"
      - description: "O que faz"
      - pros: "Vantagens claras"
      - cons: "Trade-offs honestos"
      - recommendation: "Por que sim ou não"
    rules:
      - liderar_com_recomendacao: "Sempre declarar a opção preferida primeiro"
      - explicar_raciocinio: "Não apenas listar, explicar o porquê"

  yagni:
    questions:
      - "Precisamos disso para o MVP?"
      - "Isso resolve o problema central?"
      - "O usuário sentiria falta disso?"
    action: "Se resposta for 'não' para qualquer uma, remover a funcionalidade"
    documentation: "Todas as funcionalidades removidas devem ser documentadas com justificativa"

  validation:
    incremental: true
    section_size: "200-300 palavras"
    minimum_validations: 2
    checkpoint_format: "Isso parece correto até agora?"

  sample_collection:
    purpose: "Melhorar precisão do LLM através de aprendizado em contexto"
    question: "Você tem exemplos que possam ajudar a fundamentar a solução?"
    sample_types:
      - input_files: "Entradas de exemplo (imagens, documentos, dados)"
      - output_examples: "Saída esperada (JSON, CSV, schema)"
      - ground_truth: "Valores verificados corretos"
      - related_code: "Padrões existentes para reutilizar"
    benefits:
      - "Few-shot prompting aumenta precisão em 30-50%"
      - "Dados de referência previnem alucinação"
      - "Exemplos de schema garantem consistência de formato"

  quality_gate:
    minimum_questions: 3
    sample_collection_asked: true
    minimum_approaches: 2
    minimum_validations: 2
    user_confirmed_approach: true
    yagni_applied: true
    draft_requirements_included: true

  anti_patterns:
    - despejo_perguntas: "Fazer múltiplas perguntas de uma vez"
    - assumir_respostas: "Não perguntar, apenas prosseguir"
    - abordagem_unica: "Apresentar apenas uma opção"
    - pular_validacao: "Não verificar entendimento"
    - feature_creep: "Não aplicar YAGNI"
    - pular_para_solucao: "Pular entendimento do problema"

# =============================================================================
# FASE 1: DEFINIR
# =============================================================================

define:
  command:
    name: "/definir"
    file: ".claude/skills/workflow/definir.md"
    args: "<entrada>"
    examples:
      - "/definir notas/ata-reuniao.md"
      - '/definir "Construir uma API REST para gerenciamento de usuários"'
      - "/definir docs/email-stakeholder.txt"

  agent:
    name: "define-agent"
    file: ".claude/agents/workflow/define-agent.md"
    model: "opus"
    tools:
      - Read
      - Write
      - AskUserQuestion
      - TodoWrite

  input:
    types:
      - documento_brainstorm
      - notas_reuniao
      - thread_email
      - conversa
      - requisito_direto
      - fontes_mistas

  output:
    file: ".claude/sdd/features/01_DEFINE_{FEATURE}.md"
    template: ".claude/sdd/templates/DEFINE_TEMPLATE.md"
    status_values:
      - "Rascunho"
      - "Em Andamento"
      - "Precisa de Esclarecimento"
      - "Pronto para Projetar"

  process:
    steps:
      - name: "Carregar Contexto"
        description: "Ler template e arquivos de entrada"
      - name: "Classificar Entrada"
        description: "Identificar tipo de entrada (notas de reunião, email, etc.)"
      - name: "Extrair Entidades"
        description: "Extrair dados estruturados de entrada não-estruturada"
      - name: "Calcular Score de Clareza"
        description: "Pontuar cada elemento 0-3, total deve ser >= 12"
      - name: "Preencher Lacunas"
        description: "Fazer perguntas de esclarecimento se score < 12"
      - name: "Gerar Documento"
        description: "Escrever arquivo DEFINE seguindo o template"

  extraction_elements:
    - name: "problema"
      patterns: ["Estamos com dificuldade em...", "O problema é...", "Ponto de dor:"]
    - name: "usuarios"
      patterns: ["Para a equipe...", "Clientes querem...", "Usuários precisam..."]
    - name: "objetivos_com_prioridade"
      patterns: ["Precisamos...", "Deve ter...", "Deveria ter...", "Bom ter..."]
      priority_classification:
        MUST: "MVP falha sem isso (não-negociável)"
        SHOULD: "Importante, mas existe workaround"
        COULD: "Bom ter, cortar primeiro se prazo apertar"
    - name: "criterios_sucesso"
      patterns: ["Sucesso significa...", "Saberemos quando...", "Medido por..."]
    - name: "testes_aceitacao"
      patterns: ["Dado/Quando/Então", "Caso de teste:", "Cenário:"]
    - name: "restricoes"
      patterns: ["Deve funcionar com...", "Não pode mudar...", "Limitado por..."]
    - name: "fora_escopo"
      patterns: ["Não incluindo...", "Adiado para...", "Excluído:"]
    - name: "premissas"
      patterns: ["Assumindo que...", "Esperamos que...", "Se X então...", "Depende de..."]
      format:
        id: "P-001, P-002, etc."
        statement: "O que estamos assumindo"
        impact_if_wrong: "O que acontece se premissa for inválida"
        validated: "Checkbox Sim/Não"
      note: "BRAINSTORM captura premissas exploratórias; DEFINE as formaliza em riscos rastreáveis"

  quality_gate:
    clarity_score:
      minimum: 12
      maximum: 15
      breakdown:
        problema: 3
        usuarios: 3
        objetivos: 3
        sucesso: 3
        escopo: 3

  required_sections:
    - metadados
    - declaracao_problema
    - usuarios_alvo
    - objetivos  # Com prioridade MUST/SHOULD/COULD
    - criterios_sucesso
    - testes_aceitacao
    - fora_escopo
    - restricoes
    - premissas  # Registro de riscos rastreáveis
    - detalhamento_score_clareza
    - questoes_abertas
    - historico_revisoes

  anti_patterns:
    - linguagem_vaga: "Palavras como 'melhorar', 'mais rápido' sem métricas"
    - usuarios_ausentes: "Nenhum usuário-alvo identificado"
    - criterios_nao_testaveis: "Critérios de sucesso que não podem ser medidos"
    - detalhes_implementacao: "Como-fazer na fase Definir (pertence ao Design)"

# =============================================================================
# FASE 2: PROJETAR
# =============================================================================

design:
  command:
    name: "/projetar"
    file: ".claude/skills/workflow/projetar.md"
    args: "<arquivo-define>"
    examples:
      - "/projetar .claude/sdd/features/01_DEFINE_NOTIFICACOES_USUARIO.md"
      - "/projetar 01_DEFINE_AUTH_USUARIO.md"
      - "/projetar .claude/sdd/features/01_DEFINE_EXPORTACAO_DADOS.md"

  agent:
    name: "design-agent"
    file: ".claude/agents/workflow/design-agent.md"
    model: "opus"
    tools:
      - Read
      - Write
      - Glob
      - Grep
      - TodoWrite
      - WebSearch

  input:
    file: ".claude/sdd/features/01_DEFINE_{FEATURE}.md"
    required_sections:
      - declaracao_problema
      - criterios_sucesso
      - testes_aceitacao

  output:
    file: ".claude/sdd/features/02_DESIGN_{FEATURE}.md"
    template: ".claude/sdd/templates/DESIGN_TEMPLATE.md"

  process:
    steps:
      - name: "Carregar Contexto"
        description: "Ler documento DEFINE, template e explorar padrões do codebase"
      - name: "Criar Arquitetura"
        description: "Projetar sistema com diagrama ASCII, componentes, fluxo de dados"
      - name: "Documentar Decisões"
        description: "Registrar ADRs inline com status, data, contexto, escolha, justificativa"
      - name: "Criar Manifesto de Arquivos"
        description: "Listar todos os arquivos com #, caminho, ação, propósito, dependências"
      - name: "Definir Padrões de Código"
        description: "Fornecer trechos de código prontos para copiar e colar"
      - name: "Planejar Estratégia de Testes"
        description: "Definir testes unitários, integração, E2E com metas de cobertura"
      - name: "Salvar Documento"
        description: "Escrever arquivo DESIGN seguindo o template"

  required_sections:
    - visao_geral_arquitetura
    - componentes
    - decisoes_chave
    - manifesto_arquivos
    - padroes_codigo
    - estrategia_testes

  inline_decisions:
    format:
      status: "Aceita"
      date: "AAAA-MM-DD"
      context: "Por que a decisão foi necessária"
      choice: "O que decidimos"
      rationale: "Por que esta é a escolha certa"
      alternatives_rejected: "O que não escolhemos e por quê"
      consequences: "Trade-offs aceitos"

  file_manifest:
    columns:
      - numero
      - caminho_arquivo
      - acao
      - proposito
      - dependencias

  anti_patterns:
    - codigo_compartilhado: "Dependências entre unidades deployáveis"
    - config_hardcoded: "Valores que deveriam estar em YAML"
    - deps_circulares: "A depende de B depende de A"
    - testes_ausentes: "Nenhuma estratégia de testes definida"

# =============================================================================
# FASE 3: CONSTRUIR
# =============================================================================

build:
  command:
    name: "/construir"
    file: ".claude/skills/workflow/construir.md"
    args: "<arquivo-design>"
    examples:
      - "/construir .claude/sdd/features/02_DESIGN_NOTIFICACOES_USUARIO.md"

  agent:
    name: "build-agent"
    file: ".claude/agents/workflow/build-agent.md"
    model: "sonnet"
    tools:
      - Read
      - Write
      - Edit
      - Bash
      - Glob
      - Grep
      - TodoWrite

  input:
    files:
      - ".claude/sdd/features/02_DESIGN_{FEATURE}.md"
      - ".claude/sdd/features/01_DEFINE_{FEATURE}.md"

  output:
    code: "Conforme especificado no manifesto de arquivos do DESIGN"
    report: ".claude/sdd/reports/BUILD_REPORT_{FEATURE}.md"
    template: ".claude/sdd/templates/BUILD_REPORT_TEMPLATE.md"

  execution:
    task_generation: "sob demanda a partir do manifesto de arquivos"
    order: "por dependências"
    verification: "após cada arquivo"
    retry_limit: 3

  verification:
    per_file:
      - "{verificação de import específica da linguagem}"
      - "{linter} check {arquivo}"
    full:
      - "{linter} check ."
      - "{verificador de tipos} (se configurado)"
      - "{executor de testes}"

  code_standards:
    - sem_comentarios_inline
    - type_hints_obrigatorios
    - nomes_auto_documentaveis
    - config_ao_inves_de_hardcode

  anti_patterns:
    - improvisar: "Criar arquivos que não estão no manifesto"
    - pular_verificacao: "Não testar após criação"
    - comentarios_todo: "Deixar TODOs no código"
    - comentarios_inline: "Explicar código com comentários"

# =============================================================================
# FASE 4: ENTREGAR
# =============================================================================

ship:
  command:
    name: "/entregar"
    file: ".claude/skills/workflow/entregar.md"
    args: "<arquivo-define>"
    examples:
      - "/entregar .claude/sdd/features/01_DEFINE_NOTIFICACOES_USUARIO.md"

  agent:
    name: "ship-agent"
    file: ".claude/agents/workflow/ship-agent.md"
    model: "haiku"
    tools:
      - Read
      - Write
      - Bash
      - Glob

  input:
    required:
      - ".claude/sdd/features/01_DEFINE_{FEATURE}.md"
      - ".claude/sdd/features/02_DESIGN_{FEATURE}.md"
      - ".claude/sdd/reports/BUILD_REPORT_{FEATURE}.md"

  output:
    archive_folder: ".claude/sdd/archive/{FEATURE}/"
    shipped_file: "SHIPPED_{DATE}.md"
    template: ".claude/sdd/templates/SHIPPED_TEMPLATE.md"

  archive_contents:
    - "00_BRAINSTORM_{FEATURE}.md"  # Opcional - se Fase 0 foi usada
    - "01_DEFINE_{FEATURE}.md"
    - "02_DESIGN_{FEATURE}.md"
    - "BUILD_REPORT_{FEATURE}.md"
    - "SHIPPED_{DATE}.md"

  lessons_learned:
    categories:
      - processo
      - tecnico
      - comunicacao
      - ferramentas

  pre_ship_checklist:
    - relatorio_build_completo
    - todos_testes_passando
    - sem_bloqueadores
    - testes_aceitacao_verificados

# =============================================================================
# CROSS-PHASE: ITERAR
# =============================================================================

iterate:
  command:
    name: "/iterar"
    file: ".claude/skills/workflow/iterar.md"
    args: '<arquivo> "<descrição-da-mudança>"'
    examples:
      - '/iterar 01_DEFINE_EXPORTACAO_DADOS.md "Adicionar suporte a formato CSV"'
      - '/iterar 02_DESIGN_AUTH.md "Mudar de JWT para autenticação baseada em sessão"'
      - '/iterar .claude/sdd/features/01_DEFINE_AUTH.md "Adicionar suporte multi-idioma"'

  agent:
    name: "iterate-agent"
    file: ".claude/agents/workflow/iterate-agent.md"
    model: "sonnet"
    tools:
      - Read
      - Write
      - Edit
      - AskUserQuestion
      - TodoWrite

  works_with:
    - phase: "Explorar"
      file_pattern: "00_BRAINSTORM_*.md"
      cascade_to: "Definir"
    - phase: "Definir"
      file_pattern: "01_DEFINE_*.md"
      cascade_to: "Projetar"
    - phase: "Projetar"
      file_pattern: "02_DESIGN_*.md"
      cascade_to: "Código"

  process:
    steps:
      - name: "Carregar Documento Alvo"
        description: "Ler arquivo alvo e identificar tipo de documento (BRAINSTORM/DEFINE/DESIGN)"
      - name: "Analisar Mudança"
        description: "Classificar tipo de mudança e avaliar nível de impacto"
      - name: "Aplicar Mudanças"
        description: "Fazer mudança, incrementar versão, adicionar nota de mudança"
      - name: "Avaliar Necessidade de Cascata"
        description: "Determinar se documentos downstream precisam de atualização"
      - name: "Executar Cascata"
        description: "Perguntar ao usuário e aplicar atualizações em cascata se confirmado"
      - name: "Salvar Atualizações"
        description: "Escrever documento(s) atualizado(s)"

  change_types:
    aditiva:
      impact: "baixo"
      example: "Adicionar nova funcionalidade"
    modificadora:
      impact: "médio"
      example: "Alterar comportamento existente"
    removedora:
      impact: "médio"
      example: "Remover funcionalidade"
    arquitetural:
      impact: "alto"
      example: "Mudar abordagem fundamental"

  cascade_rules:
    brainstorm_para_define:
      - abordagem_mudou: "DEFINE pode precisar de foco diferente no problema"
      - novos_itens_yagni: "Fora do escopo precisa de atualização"
      - usuarios_mudaram: "Seção de usuários-alvo precisa de atualização"
      - restricoes_mudaram: "Seção de restrições precisa de atualização"
      - novas_respostas_descoberta: "Pode afetar requisitos"

    define_para_design:
      - novo_requisito: "Pode precisar de novo componente"
      - criterios_sucesso_mudaram: "Pode precisar de abordagem diferente"
      - expansao_escopo: "Precisa de novas seções"
      - reducao_escopo: "Pode simplificar"
      - nova_restricao: "Deve ser acomodada"

    design_para_codigo:
      - novo_arquivo: "Criar arquivo"
      - arquivo_removido: "Deletar arquivo"
      - padrao_mudou: "Atualizar arquivos afetados"
      - nova_decisao: "Pode precisar de refactor"
      - mudanca_arquitetura: "Atualizações significativas necessárias"

  cascade_prompt:
    options:
      - "(a) Atualizar downstream automaticamente"
      - "(b) Apenas atualizar este documento, vou lidar com o downstream manualmente"
      - "(c) Mostrar o que mudaria primeiro"

  thresholds:
    use_iterate: "< 30% de mudança"
    consider_new_define: "> 50% de mudança"
    indicators_for_new_define:
      - "Problema completamente diferente"
      - "Usuários-alvo diferentes"
      - "Mudança fundamental de abordagem"

  version_tracking:
    location: "Seção Histórico de Revisões"
    format:
      - versao
      - data
      - autor
      - mudancas

# =============================================================================
# ESTRUTURA DE PASTAS
# =============================================================================

folder_structure:
  root: ".claude/sdd/"

  directories:
    features:
      path: "features/"
      contains:
        - "00_BRAINSTORM_*.md"
        - "01_DEFINE_*.md"
        - "02_DESIGN_*.md"

    reports:
      path: "reports/"
      contains:
        - "BUILD_REPORT_*.md"

    archive:
      path: "archive/"
      structure: "{FEATURE_NAME}/"
      contains:
        - "01_DEFINE_*.md"
        - "02_DESIGN_*.md"
        - "BUILD_REPORT_*.md"
        - "SHIPPED_*.md"

    templates:
      path: "templates/"
      contains:
        - "BRAINSTORM_TEMPLATE.md"
        - "DEFINE_TEMPLATE.md"
        - "DESIGN_TEMPLATE.md"
        - "BUILD_REPORT_TEMPLATE.md"
        - "SHIPPED_TEMPLATE.md"

    architecture:
      path: "architecture/"
      contains:
        - "WORKFLOW_CONTRACTS.yaml"
        - "ARCHITECTURE.md"

# =============================================================================
# CONVENÇÕES DE NOMENCLATURA
# =============================================================================

naming:
  feature_name:
    format: "SCREAMING_SNAKE_CASE"
    examples:
      - "NOTIFICACOES_USUARIO"
      - "AUTENTICACAO_USUARIO"
      - "EXPORTACAO_DADOS"

  files:
    brainstorm: "00_BRAINSTORM_{FEATURE}.md"
    define: "01_DEFINE_{FEATURE}.md"
    design: "02_DESIGN_{FEATURE}.md"
    build_report: "BUILD_REPORT_{FEATURE}.md"
    shipped: "SHIPPED_{YYYY-MM-DD}.md"

  date_format: "YYYY-MM-DD"

# =============================================================================
# TRANSIÇÕES DE STATUS (CRÍTICO: Previne status de documento desatualizados)
# =============================================================================

status_transitions:
  description: |
    Cada fase DEVE atualizar status dos documentos ao completar.
    Isso previne status desatualizados como "Pronto para X" após conclusão da fase.

  brainstorm:
    initial: "Explorando"
    in_progress: "Abordagens Identificadas"
    ready: "Pronto para Definir"
    after_define: "✅ Concluído (Definido)"

  define:
    initial: "Rascunho"
    in_progress: "Em Andamento"
    needs_work: "Precisa de Esclarecimento"
    ready: "Pronto para Projetar"
    after_design: "✅ Concluído (Projetado)"
    after_build: "✅ Concluído (Construído)"
    after_ship: "✅ Entregue"

  design:
    initial: "Rascunho"
    in_progress: "Em Andamento"
    ready: "Pronto para Construir"
    after_build: "✅ Concluído (Construído)"
    after_ship: "✅ Entregue"

  build_report:
    initial: "Em Andamento"
    complete: "✅ Completo"
    after_ship: "✅ Entregue"

  update_rules:
    - trigger: "/definir conclui (com entrada brainstorm)"
      updates:
        - file: "00_BRAINSTORM_{FEATURE}.md"
          field: "Status"
          value: "✅ Concluído (Definido)"

    - trigger: "/projetar conclui"
      updates:
        - file: "01_DEFINE_{FEATURE}.md"
          field: "Status"
          value: "✅ Concluído (Projetado)"
        - file: "01_DEFINE_{FEATURE}.md"
          field: "Próxima Etapa"
          value: "/construir"

    - trigger: "/construir conclui"
      updates:
        - file: "01_DEFINE_{FEATURE}.md"
          field: "Status"
          value: "✅ Concluído (Construído)"
        - file: "02_DESIGN_{FEATURE}.md"
          field: "Status"
          value: "✅ Concluído (Construído)"
        - file: "01_DEFINE_{FEATURE}.md"
          field: "Próxima Etapa"
          value: "/entregar"
        - file: "02_DESIGN_{FEATURE}.md"
          field: "Próxima Etapa"
          value: "/entregar"

    - trigger: "/entregar conclui"
      updates:
        - file: "01_DEFINE_{FEATURE}.md"
          field: "Status"
          value: "✅ Entregue"
        - file: "02_DESIGN_{FEATURE}.md"
          field: "Status"
          value: "✅ Entregue"
        - file: "BUILD_REPORT_{FEATURE}.md"
          field: "Status"
          value: "✅ Entregue"

  agent_responsibility:
    - "Cada agente DEVE atualizar status dos documentos upstream antes de completar"
    - "design-agent: Atualizar status do DEFINE para 'Concluído (Projetado)'"
    - "build-agent: Atualizar status do DEFINE e DESIGN para 'Concluído (Construído)'"
    - "ship-agent: Atualizar todos os documentos para 'Entregue'"

# =============================================================================
# PADRÕES DE QUALIDADE
# =============================================================================

quality:
  code:
    - sem_comentarios_inline
    - type_hints_obrigatorios
    - nomes_auto_documentaveis
    - config_em_yaml_nao_codigo
    - unidades_auto_contidas

  documentation:
    - headings_claros
    - tabelas_para_dados_estruturados
    - diagramas_ascii_para_arquitetura
    - historico_versoes_mantido
    - idioma_pt_br_obrigatorio

  process:
    - gates_de_fase_enforced
    - todos_artefatos_linkados
    - mudancas_via_iterar
    - licoes_capturadas

# =============================================================================
# HISTÓRICO DE VERSÕES
# =============================================================================

version_history:
  - version: "1.0.0"
    date: "2026-02-17"
    changes:
      - "Lançamento público como AgentSpec v1.0.0"
      - "Release inicial com workflow de 5 fases e orquestração de agentes"
      - "16 agentes core em 4 categorias"
      - "Sistema extensível de domínios KB"

  - version: "2.0.0"
    date: "2026-02-27"
    changes:
      - "Migração completa para Português-BR (pt-BR)"
      - "Comandos traduzidos: /explorar, /definir, /projetar, /construir, /entregar, /iterar"
      - "Prefixo numérico em features: 00_BRAINSTORM_, 01_DEFINE_, 02_DESIGN_"
      - "Mapa do Workflow exibido após cada fase"
      - "Status values em português"
